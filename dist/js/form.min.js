Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t},Date.prototype.removeDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()-e),t};let currentDate=new Date;const form=document.querySelector(".custom-form-flights"),inputDeparture=form.querySelector(".departure-input"),inputReturn=form.querySelector(".return-input"),dateDeparture=form.querySelector(".date-departure"),dateReturn=form.querySelector(".date-return"),blockDeparture=(inputDeparture.value=currentDate,inputReturn.value=currentDate.addDays(1),RenderDate(),form.querySelector(".departure")),blockReturn=form.querySelector(".return");function ResetDates(){inputDeparture.value=currentDate,inputReturn.value=currentDate.addDays(1),RenderDate()}function RenderDate(){dateDeparture.innerText=formatDate(new Date(inputDeparture.value)),dateReturn.innerText=formatDate(new Date(inputReturn.value))}function formatDate(e){var t=e.getDay(),r=e.getDate().toString().padStart(2,"0"),e=e.getMonth();return["sun","mon","tue","wed","thu","fri","sat"][t]+` ${r} `+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e]}form.addEventListener("click",e=>{e.target.closest(".prev-btn-departure")?new Date(inputDeparture.value)>=new Date&&(inputDeparture.value=new Date(inputDeparture.value).removeDays(1),RenderDate()):e.target.closest(".next-btn-departure")?(inputDeparture.value=new Date(inputDeparture.value).addDays(1),inputDeparture.value==inputReturn.value&&(inputReturn.value=new Date(inputReturn.value).addDays(1)),RenderDate()):e.target.closest(".prev-btn-return")?new Date(inputReturn.value).removeDays(1)>new Date(inputDeparture.value)&&(inputReturn.value=new Date(inputReturn.value).removeDays(1),RenderDate()):e.target.closest(".next-btn-return")&&(inputReturn.value=new Date(inputReturn.value).addDays(1),RenderDate())});const btnRevers=form.querySelector(".btn-revers");let locations=form.querySelectorAll(".select-wraper-location");const formContent=form.querySelector(".form-content");function ReversLocation(){var e=locations[0].querySelector(".title").innerText,e=(locations[0].querySelector(".title").innerText=locations[1].querySelector(".title").innerText,locations[1].querySelector(".title").innerText=e,locations[0].querySelector("input").getAttribute("name")),t=locations[0].querySelector("input").getAttribute("class"),e=(locations[0].querySelector("input").setAttribute("name",locations[1].querySelector("input").getAttribute("name")),locations[0].querySelector("input").setAttribute("class",locations[1].querySelector("input").getAttribute("class")),locations[1].querySelector("input").setAttribute("name",e),locations[1].querySelector("input").setAttribute("class",t),`<div class="select-wraper-location">${locations[0].innerHTML}</div>`),t=`<div class="select-wraper-location">${locations[1].innerHTML}</div>`;locations[0].remove(),locations[1].remove(),btnRevers.insertAdjacentHTML("afterend",e),btnRevers.insertAdjacentHTML("beforeBegin",t),(locations=form.querySelectorAll(".select-wraper-location"))[0].querySelector("input").value=locations[0].querySelector(".full-location").innerText,locations[1].querySelector("input").value=locations[1].querySelector(".full-location").innerText}function removeLocationActive(){const e=document.querySelectorAll(".select-wraper-location");e.forEach(e=>{e.querySelector(".drop-menu").classList.remove("active"),e.classList.remove("active")})}btnRevers.addEventListener("click",ReversLocation),locations.forEach(e=>{const t=e.querySelector(".select-location"),r=e.querySelector(".drop-menu"),o=r.querySelectorAll("li");t.querySelector(".location").innerText=o[0].querySelector(".location").innerText,t.querySelector(".full-location").innerText=o[0].querySelector(".full-location").innerText,e.querySelector("input").value=o[0].querySelector(".full-location").innerText}),form.addEventListener("click",t=>{if(t.target.closest(".select-wraper-location")){const r=t.target.closest(".select-wraper-location"),o=r.querySelector(".select-location"),a=r.querySelector(".drop-menu");let e;if(r.classList.contains("active")&&(e=!0),removeLocationActive(),e&&(r.classList.add("active"),a.classList.add("active")),t.target.closest(".select-location")&&(a.classList.toggle("active"),r.classList.toggle("active")),t.target.closest("li")){const n=t.target.closest("li");o.querySelector(".location").innerText=n.querySelector(".location").innerText,o.querySelector(".full-location").innerText=n.querySelector(".full-location").innerText,r.querySelector("input").value=n.querySelector(".full-location").innerText,a.classList.remove("active"),r.classList.remove("active")}}});const headerForm=form.querySelector(".header-form"),itemsHeader=headerForm.querySelectorAll(".item-header-form");function RemoveActive(){itemsHeader.forEach(e=>{e.querySelector(".settings").classList.remove("active"),e.querySelector(".drop-menu").classList.remove("active")})}itemsHeader.forEach(e=>{const t=e.querySelector(".drop-menu"),r=e.querySelector("input");e=t.querySelector("li");r.value=e.dataset.value}),itemsHeader.forEach(e=>{const t=e.querySelector(".drop-menu"),r=t.querySelectorAll("li"),o=e.querySelector(".settings"),a=e.querySelector("input");r.forEach(e=>{e.addEventListener("click",()=>{r.forEach(e=>{e.classList.remove("active")}),e.classList.add("active"),a.value=e.dataset.value,t.classList.remove("active"),o.classList.remove("active")})})}),document.addEventListener("click",e=>{e.target.closest(".select-wraper-location")||locations.forEach(e=>{e.querySelector(".drop-menu").classList.remove("active")}),e.target.closest(".settings")?(e.target.closest(".item-header-form").querySelector(".drop-menu").classList.toggle("active"),e.target.closest(".item-header-form").querySelector(".settings").classList.toggle("active")):e.target.closest(".item-header-form")||RemoveActive()});